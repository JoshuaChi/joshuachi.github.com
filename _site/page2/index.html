<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Joshua Chi's Blog</title>
   <meta name="author" content="Joshua Chi" />
   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

		<!-- Google Analytics -->
		<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-9434024-4']);
		_gaq.push(['_trackPageview']);

		(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>
		<!-- Google Analytics end -->
</head>
<body>

<div class="site">
  <div class="header">
    <a href="/">Free To Feel</a>
  </div>

<!--start of side bar-->
<div id="sidebar" >
	<img src='http://www.gravatar.com/avatar/81759b36bd906bbf803ce4a5ce84e643.png' />
	<br />
	Joshua Chi
    <div class="contact">
        <a href="http://twitter.com/Joshua_C/">twitter.com/Joshua_C</a><br />
				<a href="https://github.com/joshuachi">My Github</a><br />
				<a href="http://www.dachebang.com">搭车帮</a><br />
				<a href="http://www.leanprofile.com">Lean Profile</a><br />
				<a href="http://www.kiwitask.com">Find freelancer</a><br />
			</div>
			<div>
				<a href='http://www.freetofeel.com/archives.html'> Archived Posts</a>
			</div>
			<div class="rss">
                                <p><a href="http://feeds.feedburner.com/freetofeel"><img src="http://feeds.feedburner.com/~fc/freetofeel?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a></p>
				<p>
				<a href="http://freetofeel.com/atom.xml">Subscribe(xml)</a>
				</p>
				<p>
				<a href="http://feeds.feedburner.com/FreeToFeel">Subscribe(feedburner)</a>
				</p>
			</div>	
		
			<p class='douban'>
				<script type="text/javascript" src="http://www.douban.com/service/badge/joshua_c/?show=collection&amp;select=random&amp;n=8&amp;columns=2&amp;hidelogo=yes&amp;cat=book|music" ></script> 
				</p>
</div>
<!--end of side bar-->

	<div id='content'>
		<div id="home">

<div class="post">
  <ul class="content">
		
			<div class="post" id="postid-/2012/10/02/move-to-dnspod">
				<h3 class="title"><a href="/2012/10/02/move-to-dnspod.html">Move From Godaddy DNS to Dnspod</a></h3>
				
				<p>It's the first time that my domain can not be resolved for around 6 hours. I learned <a href='http://www.godaddy.com'>godaddy</a> DNS was blocked in China sometimes.</p>

<p>This is what I hate to work on a Chinese site. After several minutes struggle, I decide to move my dns from <a href='http://www.godaddy.com'>godaddy</a> to <a href='https://www.dnspod.cn/'>dnspod</a>.</p>

<p><a href='https://www.dnspod.cn/'>dnspod</a> did really a nice work. No matter the user interfaces or the services. All of them  meet my requirements.</p>

<p>I don't want to repeat how to setup the dnspod. <a href='https://www.google.com/search?q=dns+godaddy+dnspod&oq=dns+godaddy+dnspod&sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8'>google search</a> will tell you more about this.</p>

<p>Now I will just wait for the new dns takes affect. Actaully dns was solved quickly in China, but not in JiangSu province in my testing. Good luck to my <a href='http://www.dachebang.com'>www.dachebang.com</>.</p>


				<div class="post-metadata">
					October 02, 2012 | 
					<a href='/2012/10/02/move-to-dnspod.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#dns'>dns</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2012/08/26/linode-migration">
				<h3 class="title"><a href="/2012/08/26/linode-migration.html">Linode Facility Migration to Fremont</a></h3>
				
				<p>After using <a href='www.linode.com'>linode</a> host center at Tokyo for a while, I decided to migrate my node to Fremont.</p>

<p>Linode provide you a <a href='http://www.linode.com/speedtest/'>speedtest page</a></p>

<p>Here is my speed testing result. Those two tasks are started at the same time.</p>

<pre>
100MB-tokyo.bin 1.2/100MB, 47 min left
100MB-fremont.bin 66.5/100MB, 22 secs left
</pre>


<p>But If I ping the speed test domain:</p>

<pre>
$ ping speedtest.tokyo.linode.com
PING speedtest.tokyo.linode.com (106.187.96.148): 56 data bytes
64 bytes from 106.187.96.148: icmp_seq=0 ttl=51 time=82.885 ms
64 bytes from 106.187.96.148: icmp_seq=1 ttl=51 time=77.757 ms
64 bytes from 106.187.96.148: icmp_seq=2 ttl=51 time=77.919 ms

$ ping speedtest.fremont.linode.com
PING speedtest.fremont.linode.com (50.116.14.9): 56 data bytes
64 bytes from 50.116.14.9: icmp_seq=0 ttl=51 time=146.268 ms
Request timeout for icmp_seq 1
64 bytes from 50.116.14.9: icmp_seq=2 ttl=51 time=146.403 ms
64 bytes from 50.116.14.9: icmp_seq=3 ttl=51 time=145.409 ms
64 bytes from 50.116.14.9: icmp_seq=4 ttl=51 time=146.396 ms
64 bytes from 50.116.14.9: icmp_seq=5 ttl=51 time=148.467 ms
</pre>


<p>As you can see the result is totaly different. So which one you can trust?</p>

<p>The response from linode support:</p>

<pre>
Individual packets take less time to travel between our Tokyo datacenter and your location than our Fremont datacenter, but that our Fremont datacenter is able to provide you with faster download speeds to your location. Which location is better for you depends on whether your use case likes decreased latency, or better download speeds.
</pre>


<p>At last I decide to switch to Fremont anyhow. So Linode provide me a new ip address. The interesting thing comes. My ISP blocked this ip address for some reason. You can find the fail point by using either "traceroute" or <a href='http://library.linode.com/linux-tools/mtr/'>MTR</a>.</p>

<p>So I asked for a new ip address and reboot my node.</p>

<p>Don't forget to update your hosts file with new ip address to make your application work again. Good luck!</p>


				<div class="post-metadata">
					August 26, 2012 | 
					<a href='/2012/08/26/linode-migration.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#linode'>linode</a>
						, 
					
						
						<a href='/tags.html#vps'>vps</a>
						, 
					
						
						<a href='/tags.html#fremont'>fremont</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2012/01/22/dragon-year">
				<h3 class="title"><a href="/2012/01/22/dragon-year.html">年末总结(Dragon Year Wish List)</a></h3>
				
				<p>开始慢慢享受除夕之夜了。最尽意的莫过于总结过去，展望明年。
今年除夕只是飘着小雪，但家乡依然比上海冷。
过去的一年我真的努力尝试去喜欢上海，去适应它。尽管为此我已经付出了代价。2011年，身体状况不佳，这个倒是给我提了一个很大的醒。
2011年10月份开始，着实让我体会到了忙，所有的事情交织在一块，忙的我正事都来不及做了。</p>

<h3>2011 完成的目标</h3>




<ul>
  <li>
    <del>结婚，自己都觉得不好意思了；</del>
  </li>
  <li>
    <del>下半年装修；</del>
  </li>
  <li>
    <del>完成学车；</del>
  </li>
  <li>
    <del>回家把护照给办了；</del>
  </li>
  <li>
    <del>希望可以在工作中做的更多，得到更大的认可。</del>
  </li>
  <li>
    <del>和亲戚朋友多联系，2010年，我们联系的太少了；</del>
  </li>
  <li>
    <del>争取做一次说的过去的远徒旅行或者国外旅行一次 :-)；</del>    
  </li>
  <li>
    <del>多写点有价值的文章</del>    
  </li>
</ul>




<h3>2011 未完成的事情</h3>




<ul>
  <li>
    上线一个新的产品， 如果有精力将其它几个产品打包上线 -- <br />事情多蹉跎，这个是我最想做的事情，在最后的几个月只能被搁置，完成率60%。
  </li>
  <li>
    在互联网上混的更实在，看到这领域太多的肤浅和吹嘘 -- <br />因为第一次定目标，此目标定的太虚。想的没有用实体表达出来，以至目前无法测量。  
  </li>
  <li>
    寻找一种锻炼身体的方式，这个是最急切的任务 -- <br />尝试了去打羽毛球，也确实坚持了半年多，但最后还是级别太低，没能最后坚持下来。  
  </li>
</ul>




<h3>2012 TODO LIST：</h3>




<ul>
  <li>
    强身健体第一位，具体目标是锻炼腰部腹部肌肉，提高身体协调能力。
  </li>
  <li>
    职业发展： <br />
    a. 空间的预测;<br />
    b. 时间的估计，把持重点;<br />
    c. Have a better idea about how to manage team and how to manage company.
  </li>
  <li>
    增加静心休息的时间。
  </li>
  <li>
    买车。
  </li>
  <li>
    读书>=15本；<br />
    电影>=5;<br />
  </li>
  <li>
    完成网站建设，其实现在已经不再是为了完成而完成了。练手；练脑；提高思维的整体性，连续性，可扩展性。
  </li>
  <li>
    蜜月履行。
  </li>
  <li>
    去年的时间管理基本满意，需要继续坚持下来。
  </li>
</ul>




<h3>2012 WISH LIST：</h3>


<p>祝福我，我的家人，我认识的亲戚朋友身体健健康康！</p>


				<div class="post-metadata">
					January 22, 2012 | 
					<a href='/2012/01/22/dragon-year.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#2012'>2012</a>
						, 
					
						
						<a href='/tags.html#newyear'>newyear</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2011/08/01/mysql-federated-engine">
				<h3 class="title"><a href="/2011/08/01/mysql-federated-engine.html">How And When To Use Mysql Federated Storage Engine</a></h3>
				
				<p>Learned from <a href='http://conferences.oreillynet.com/presentations/mysql06/mixi_update.pdf'>mixi update</a> that they are using mysql federated engine for db partitioning.</p>

<pre>
Use FEDERATED TABLE from MySQL 5.
Or do SELECT twice which is faster than using FEDERATED TABLEs
</pre>


<p><a href='http://dev.mysql.com/doc/refman/5.0/en/federated-storage-engine.html'>Mysql Official document</a> didn't talk too much about how and when to use federated engine. You can learned more from <a href='http://www.xaprb.com/blog/2007/01/29/mysqls-federated-storage-engine-part-1/'>Mysql Federated storage engine 1</a> and <a href='http://www.xaprb.com/blog/2007/01/31/mysqls-federated-storage-engine-part-2/'>Mysql Federated storage engine 2</a>.</p>

<p>Finally I find some clues in <a href='http://www.xaprb.com/blog/2007/01/31/mysqls-federated-storage-engine-part-2/'>Mysql Federated storage engine 2</a>:</p>

<pre>
Strengths:

For example, pretend you have a set of distributed servers working on small parts of a large task, and their results need to be merged back together when done without conflict. Many solutions to this problem involve modulo arithmetic for generating primary keys. This could be a good use of a FEDERATED table: just federate one central table on all the servers, have the processes INSERT into the table, and they’ll get non-conflicting primary key numbers. That’s a trivially easy way to coordinate distributed resource requests.

The way it lets you mis-define tables holds great potential. For example, Giuseppe Maxia has already noted that you can define a FEDERATED table against a view. Views don’t have indexes (yet), but that shouldn’t stop you from telling the engine it does! That way, your WHERE clauses are sent through to the remote server unharmed, where the view can execute GROUP BY queries and the like. Giuseppe even outlines a way to get the remote server to execute arbitrary commands via a FEDERATED table!

What about combinations with replication, triggers and so forth? There must be many more cool hacks waiting to be discovered.

</pre>


<p>And in <a href='http://mysql.lamphost.net/tech-resources/articles/mysql-federated-storage.html'>Accessing Distributed Data with the Federated Storage Engine</a>, you can find a simple demo that 'merge' two partioned tables into one by creating a view. Although, this is not what I expected. It will still make sense in some cases.</p>

<p>Still have some questions about how the performance looks like when use view? And what's the limitation of rows or table size when using federated storage engine?</p>


				<div class="post-metadata">
					August 01, 2011 | 
					<a href='/2011/08/01/mysql-federated-engine.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#mysql'>mysql</a>
						, 
					
						
						<a href='/tags.html#federated'>federated</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2011/07/26/jquery-ajax-file-upload-with-symfony4">
				<h3 class="title"><a href="/2011/07/26/jquery-ajax-file-upload-with-symfony4.html">Form Ajax Submit With Jquery Form Plugin</a></h3>
				
				<p>I can't remember how I make file ajax upload work last time. So a blog might be the best place to record it.</p>

<p>Because <a href='http://en.wikipedia.org/wiki/Xmlhttprequest'>XMLHttpRequest</a> didn't support file upload, and I didn't want to spend much time to hack it. So it might be simple to find a plugin to do it. I compared several plugins supporting file ajax upload.</p>

<p>At last I choose <a href='http://malsup.com/jquery/form/'>Jquery Form Plugin</a>. Althrough it didn't sound like it supposed to be. Especially there is file field in your form. And the data format that client communicate with server is <a href='http://en.wikipedia.org/wiki/Json'>json</a></p>

<p>So what does it look like?</p>

<p>JS Client:</p>

<pre>
                            var options = {
                                beforeSubmit: function(formData, jqForm, options) { 
                                  var queryString = $.param(formData);
                                    alert('About to submit: \n\n' + queryString); 
                                    
                                    for (var i=0; i < formData.length; i++) { 
                                        if (!formData[i].value) { 
                                          return false; 
                                    } 
                                    } 
                                },
                                success: function(data) {
                                        if(data && typeof data == 'object'){
                                            //...
                                        }
                                },
                url:       '/action', 
                dataType:  'json',
                clearForm: true
              }; 
              
                            $('#form').ajaxSubmit(options);
                          return false; 
</pre>


<p>Symfony Backend:</p>

<pre>

        $json = json_encode($data);
        if(!$request->isXmlHttpRequest()){
          echo '&lt;textarea&gt;'.$json.'&lt;/textarea&gt;';
          return sfView::NONE;
        }else{
        echo $json;
          return sfView::NONE;
        }
</pre>


<p>You can check <a href='http://malsup.com/jquery/form/#file-upload'>plugin document</a> to know why you need 'echo "&lt;textarea&gt;"'.  :-D</p>


				<div class="post-metadata">
					July 26, 2011 | 
					<a href='/2011/07/26/jquery-ajax-file-upload-with-symfony4.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#jquery'>jquery</a>
						, 
					
						
						<a href='/tags.html#file'>file</a>
						, 
					
						
						<a href='/tags.html#symfony'>symfony</a>
						, 
					
						
						<a href='/tags.html#ajax'>ajax</a>
						, 
					
						
						<a href='/tags.html#form'>form</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2011/07/02/iphone4-network-sharing-under-ubuntu">
				<h3 class="title"><a href="/2011/07/02/iphone4-network-sharing-under-ubuntu.html">Network Sharing Between Ubuntu And IPhone4(China Unicom Contract Version)</a></h3>
				
				<p>Find a solution from Internet that can make network sharing between Ubuntu And IPhone4.</p>

<pre>
sudo add-apt-repository ppa:pmcenery/ppa

sudo apt-get update

sudo apt-get install gvfs ipheth-dkms ipheth-utils
</pre>


<p>If you can pass all these steps, and then restart your machine. Bingo!</p>

<p>You can find more information <a href='http://ivkin.net/2010/05/tethering-ubuntu-lucid-lynx-and-iphone-os/#comment-4790' >here</a>.</p>


				<div class="post-metadata">
					July 02, 2011 | 
					<a href='/2011/07/02/iphone4-network-sharing-under-ubuntu.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#wifi'>wifi</a>
						, 
					
						
						<a href='/tags.html#ubuntu'>ubuntu</a>
						, 
					
						
						<a href='/tags.html#iphone4'>iphone4</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2011/06/22/get-commit-back-after-git-hard-reset">
				<h3 class="title"><a href="/2011/06/22/get-commit-back-after-git-hard-reset.html">Restore Lost Commits After Git Hard Reset</a></h3>
				
				<p>Sometimes, you will make mistakes. But when someone told you there still is a hope that if you try xxxxx. What feeling will you have?</p>

<p>The following might be one solution after 'git reset --hard' and realized you made a mistake:</p>

<pre>
  $ git reflog
  $ git merge 7c61179
</pre>


<p>Check the blog post <a href='http://gitready.com/advanced/2009/01/17/restoring-lost-commits.html'>here</a>.</p>


				<div class="post-metadata">
					June 22, 2011 | 
					<a href='/2011/06/22/get-commit-back-after-git-hard-reset.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#git'>git</a>
						
					 
				</div>

			</div>
		
		
		<div class="paging">
		
			<a href="/page3" class="previous">&#x25C4; Previous</a>
		
		
			
			  <a href="/" class="next">Next &#x25BA;</a>
			
		
		</div>

  </ul>
</div>
</div>

	</div>
  
  <div class="footer">
		<div id="copyright">
			Copyright &copy; 2011 Joshua Chi - Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://github.com/">Github</a>
		</div>
  </div>    
</div>

</body>
</html>
