<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Joshua Chi's Blog</title>
   <meta name="author" content="Joshua Chi" />
   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

		<!-- Google Analytics -->
		<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-9434024-4']);
		_gaq.push(['_trackPageview']);

		(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>
		<!-- Google Analytics end -->
</head>
<body>

<div class="site">
  <div class="header">
    <a href="/">Free To Feel</a>
  </div>

<!--start of side bar-->
<div id="sidebar" >
	<img src='http://www.gravatar.com/avatar/81759b36bd906bbf803ce4a5ce84e643.png' />
	<br />
	Joshua Chi
    <div class="contact">
        <a href="http://twitter.com/Joshua_C/">twitter.com/Joshua_C</a><br />
				<a href="https://github.com/joshuachi">My Github</a><br />
				<a href="http://www.dachebang.com">搭车帮</a><br />
				<a href="http://www.kiwitask.com">Find freelancer</a><br />
			</div>
			<div>
				<a href='http://www.freetofeel.com/archives.html'> Archived Posts</a>
			</div>
			<div class="rss">
                                <p><a href="http://feeds.feedburner.com/freetofeel"><img src="http://feeds.feedburner.com/~fc/freetofeel?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a></p>
				<p>
				<a href="http://freetofeel.com/atom.xml">Subscribe(xml)</a>
				</p>
				<p>
				<a href="http://feeds.feedburner.com/FreeToFeel">Subscribe(feedburner)</a>
				</p>
			</div>	
		
			<p class='douban'>
				<script type="text/javascript" src="http://www.douban.com/service/badge/joshua_c/?show=collection&amp;select=random&amp;n=8&amp;columns=2&amp;hidelogo=yes&amp;cat=book|music" ></script> 
				</p>
</div>
<!--end of side bar-->

	<div id='content'>
		<div id="home">

<div class="post">
  <ul class="content">
		
			<div class="post" id="postid-/2010/07/28/import-big-innodb-tables">
				<h3 class="title"><a href="/2010/07/28/import-big-innodb-tables.html">Import Big InnoDB Tables</a></h3>
				
				<ol>
<li>turn off the logs;</li>
<li>turn off unique key check if the table has;</li>
<li>turn off foreign key check;</li>
</ol>


<p><ul></p>

<pre><code>&lt;li&gt;
</code></pre>

<p>When importing data into InnoDB, make sure that MySQL does not have autocommit mode enabled because that requires a log flush to disk for every insert. To disable autocommit during your import operation, surround it with SET autocommit and COMMIT statements:</p>

<p><code>SET autocommit=0;
... SQL import statements ...
COMMIT;</code></p>

<p>If you use the mysqldump option --opt, you get dump files that are fast to import into an InnoDB  table, even without wrapping them with the SET autocommit and COMMIT statements. </li></p>

<pre><code>&lt;li&gt;If you have UNIQUE constraints on secondary keys, starting from MySQL 3.23.52 and 4.0.3, you can speed up table imports by temporarily turning off the uniqueness checks during the import session:
</code></pre>

<p><code>SET unique_checks=0;
... SQL import statements ...
SET unique_checks=1;</code></p>

<p>For big tables, this saves a lot of disk I/O because InnoDB can use its insert buffer to write secondary index records in a batch. Be certain that the data contains no duplicate keys.</li></p>

<pre><code>&lt;li&gt;#
</code></pre>

<p>If you have FOREIGN KEY constraints in your tables, starting from MySQL 3.23.52 and 4.0.3, you can speed up table imports by turning the foreign key checks off for a while in the import session:
<code>
SET foreign_key_checks=0;
... SQL import statements ...
SET foreign_key_checks=1;</code></p>

<p>For big tables, this can save a lot of disk I/O.
</li></p>

<p>If the above solution still can not quick your import process. Try <a href="http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html">mysqlimport</a>.  You can use mysqldump to dump a sql file and a text file. There is an example, look like this:
<pre name='code' class='sql'>
shell> mysql -e 'CREATE TABLE imptest(id INT, n VARCHAR(30))' test
shell> ed
a
100     Max Sydow
101     Count Dracula
.
w imptest.txt
32
q
shell> od -c imptest.txt
0000000   1   0   0  \t   M   a   x       S   y   d   o   w  \n   1   0
0000020   1  \t   C   o   u   n   t       D   r   a   c   u   l   a  \n
0000040
shell> mysqlimport --local test imptest.txt
test.imptest: Records: 2  Deleted: 0  Skipped: 0  Warnings: 0
shell> mysql -e 'SELECT * FROM imptest' test
+------+---------------+
| id   | n             |
+------+---------------+
|  100 | Max Sydow     |
|  101 | Count Dracula |
+------+---------------+</p>

<p></pre></p>


				<div class="post-metadata">
					July 28, 2010 | 
					<a href='/2010/07/28/import-big-innodb-tables.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#innodb'>innodb</a>
						, 
					
						
						<a href='/tags.html#mysql'>mysql</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2010/07/03/symfony-1-0-addjoin-an-array">
				<h3 class="title"><a href="/2010/07/03/symfony-1-0-addjoin-an-array.html">Symfony 1.0 addJoin an array</a></h3>
				
				<p>In sf1.3, we can use addJoin(array('id_a'm 'id_b'), array('id_1', 'id_2'))</p>

<pre name='code' class='php'>
/**
     * This is the way that you should add a straight (inner) join of two tables.  For
     * example:
     *
     * <p>
     * AND PROJECT.PROJECT_ID=FOO.PROJECT_ID
     * <p>
     *
     * left = PROJECT.PROJECT_ID
     * right = FOO.PROJECT_ID
     *
     * @param      mixed $left A String with the left side of the join.
     * @param      mixed $right A String with the right side of the join.
     * @param      mixed $operator A String with the join operator e.g. LEFT JOIN, ...
   *
     * @return     Criteria A modified Criteria object.
     */
    public function addJoin($left, $right, $operator = null)
    {
        $join = new Join();
    if (!is_array($left)) {
      // simple join
      $join->addCondition($left, $right);
    } else {
      // join with multiple conditions
      // deprecated: use addMultipleJoin() instead
      foreach ($left as $key => $value)
      {
        $join->addCondition($value, $right[$key]);
      }
    }
        $join->setJoinType($operator);
        
        return $this->addJoinObject($join);
    }
</pre>


<p>Sometimes we still work on symfony 1.0. So when we want to join on more keys, it seems impossible.</p>

<pre name='code' class='php'>
select * from books left join categories on book.category_id = categories.id where categories.name='biography'
</pre>


<p>If books has 1,000,000 items. There are 100,000 categories, but only 1000 categories with name 'biography' . The above sql will go through all the categories. But we propel can generated sql like this:</p>

<pre name='code' class='php'>
select * from books left join categories on book.category_id = categories.id and categories.name='biography'
</pre>


<p>This sql can limit the touched categories number to 1000.</p>

<p>So we can do following in symfony 1.0</p>

<pre name='code' class='php'>
$c->addJoin(BookPeer::CATEGORY_ID, CategoryPeer::ID.' AND '.CategoryPeer::NAME.'= "biography"', Criteria::LEFT_JOIN);
</pre>



				<div class="post-metadata">
					July 03, 2010 | 
					<a href='/2010/07/03/symfony-1-0-addjoin-an-array.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#symfony'>symfony</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2010/06/28/how-to-win-others-trust">
				<h3 class="title"><a href="/2010/06/28/how-to-win-others-trust.html">How to win others trust</a></h3>
				
				<p>I just want to post some suggestions about 'trust' from my experience. It might not be perfect, but I am sure some of them are mostly useful for you.</p>

<p><a href="http://en.wikipedia.org/wiki/Trust">Trust (social sciences), reliance on another person or entity. Having faith in others and believing them.</a></p>

<ul>    
    <li><strong>Be polite.</strong> Only when you respect the others, you can get the respect from the others. Only when you get respect, then it is possible for you to get the 'trust'.</li>
    <li><strong>Trust is not two-way.</strong> It doesn't mean if you trust somebody, somebody should also trust on you. But for sure they will try to trust you firstly. And then if you break the trust from this guy, it will difficulty for you to get it back.</li>
    <li><strong>Trust is hard to copy.</strong> If you didn't know how to be honest man, you will break it at sometime.</li>
    <li><strong>Think before you say.</strong> When somebody ask you something seriously, please think it for a while and then make the reply. If you don't know, you can try to give some references or just say 'no'. Don't waste the others' time and the time of yourself.</li>
    <li><strong>Contribute to the others.</strong> Try to share something or give some help for the others. Don't live in the world with yourself.</li>
    <li><strong>Keep your promise.</strong> If you lost your promise for the others several times and everybody knows you didn't try your best, you will lost the trust forever.</li>
    <li><strong>Try to say 'sorry'. Don't always say 'sorry'.</strong> When you lost your promise, try to say sorry and give a reasonable explanation, rather than ignore it. But..but don't always say sorry for the same mistake.</li>
    <li><strong>Undertake your mistake.</strong> If you make something wrong in your group, please undertake the mistake, rather than hide it. If you think the others might be stupid, you will be the stupid one.</li>

</ul>





				<div class="post-metadata">
					June 28, 2010 | 
					<a href='/2010/06/28/how-to-win-others-trust.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#trust'>trust</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2010/06/03/mysql-avoid-filesort">
				<h3 class="title"><a href="/2010/06/03/mysql-avoid-filesort.html">Mysql : Avoid Filesort</a></h3>
				
				<ul>
    <li>You can avoid the filesort by making order by column appear in the where clause</li>

    <li>When using join, make sure the left side join table column is used in the ORDER BY clause or change the join type</li>
</ul>


<p><a href="http://venublog.com/2007/11/29/mysql-how-to-avoid-filesort/">Reference</a></p>


				<div class="post-metadata">
					June 03, 2010 | 
					<a href='/2010/06/03/mysql-avoid-filesort.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#mysql'>mysql</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2010/06/01/fighting-with-an-issue-in-cracked-mac-machine">
				<h3 class="title"><a href="/2010/06/01/fighting-with-an-issue-in-cracked-mac-machine.html">Fighting with an issue in cracked mac machine</a></h3>
				
				<p>Problem: There is always a black border for every window in a cracked mac, including 'Finder', 'Terminal', even the icon on the desktop.</p>

<p>Solution: Delete 'com.apple.universalaccess.plist' in /Usr/$YOURNAME/Library/Preferences/. And then Logout and login.</p>

<p>It can fixed in my cracked mac machine.
And the main idea was back up your mac preferences</p>

<pre name='code' class='css'>
cp -R /Usr/$YOURNAME/Library/Preferences/ /Usr/$YOURNAME/backup/
</pre>


<p>And then when you login again, the preferences will be recreated again, like a new user.
For you, you just try to copy some plist from /Usr/$YOURNAME/backup/ to /Usr/$YOURNAME/Library/Preferences/. And then you can check which plist file was the fail reason</p>


				<div class="post-metadata">
					June 01, 2010 | 
					<a href='/2010/06/01/fighting-with-an-issue-in-cracked-mac-machine.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#mac'>mac</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2010/05/31/error-while-executing-gem-gemgemnotfoundexception">
				<h3 class="title"><a href="/2010/05/31/error-while-executing-gem-gemgemnotfoundexception.html">ERROR:  While executing gem ... (Gem::GemNotFoundException)</a></h3>
				
				<p>Try</p>

<pre name='code' class='php'>
gem clean
</pre>


<p><a href="http://stackoverflow.com/questions/2273503/ruby-gem-package-manager-failing-with-gemgemnotfoundexception">reference</a></p>

<p>If you got</p>

<pre name='code' class='php'>
/usr/bin/gem:10: undefined method `manage_gems' for Gem:Module (NoMethodError)
</pre>


<p>Check if there are two gem under /usr/bin/ directory.</p>


				<div class="post-metadata">
					May 31, 2010 | 
					<a href='/2010/05/31/error-while-executing-gem-gemgemnotfoundexception.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#gem'>gem</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2010/05/21/joshuas-feel">
				<h3 class="title"><a href="/2010/05/21/joshuas-feel.html">Joshuas Feel</a></h3>
				
				<ol>
<li><p>Important VS Urgent
In everyone's life, there are urgent things and important things. You will feel pressure if there are a lot of urgent things. And you will pick urgent things before starting the important ones. But have you think about this logic? Sometimes the urgent things are caused by the important ones. Taking exercises is important thing for your healthy. But if you get sick, that will be the urgent thing. But if you pay more attention to the important things, may be you will not get sick. This is the logic!
So pay more attention to the important ones, which will save you a lot of time.</p></li>
<li><p>The best architecture will not the one that can work best for your project.</p></li>
<li><p>Rome was not built in a day!</p></li>
</ol>



				<div class="post-metadata">
					May 21, 2010 | 
					<a href='/2010/05/21/joshuas-feel.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#feeling'>feeling</a>
						
					 
				</div>

			</div>
		
		
		<div class="paging">
		
			<a href="/page6" class="previous">&#x25C4; Previous</a>
		
		
			
			  <a href="/page4" class="next">Next &#x25BA;</a>
			
		
		</div>

  </ul>
</div>
</div>

	</div>
  
  <div class="footer">
		<div id="copyright">
			Copyright &copy; 2011 Joshua Chi - Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://github.com/">Github</a>
		</div>
  </div>    
</div>

</body>
</html>
