<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Joshua Chi's Blog</title>
   <meta name="author" content="Joshua Chi" />
   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

		<!-- Google Analytics -->
		<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-9434024-4']);
		_gaq.push(['_trackPageview']);

		(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>
		<!-- Google Analytics end -->
</head>
<body>

<div class="site">
  <div class="header">
    <a href="/">Free To Feel</a>
  </div>

<!--start of side bar-->
<div id="sidebar" >
	<img src='http://www.gravatar.com/avatar/81759b36bd906bbf803ce4a5ce84e643.png' />
	<br />
	Joshua Chi
    <div class="contact">
        <a href="http://twitter.com/Joshua_C/">twitter.com/Joshua_C</a><br />
				<a href="https://github.com/joshuachi">My Github</a><br />
				<a href="http://www.dachebang.com">搭车帮</a><br />
				<a href="http://www.kiwitask.com">Find freelancer</a><br />
			</div>
			<div>
				<a href='http://www.freetofeel.com/archives.html'> Archived Posts</a>
			</div>
			<div class="rss">
                                <p><a href="http://feeds.feedburner.com/freetofeel"><img src="http://feeds.feedburner.com/~fc/freetofeel?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a></p>
				<p>
				<a href="http://freetofeel.com/atom.xml">Subscribe(xml)</a>
				</p>
				<p>
				<a href="http://feeds.feedburner.com/FreeToFeel">Subscribe(feedburner)</a>
				</p>
			</div>	
		
			<p class='douban'>
				<script type="text/javascript" src="http://www.douban.com/service/badge/joshua_c/?show=collection&amp;select=random&amp;n=8&amp;columns=2&amp;hidelogo=yes&amp;cat=book|music" ></script> 
				</p>
</div>
<!--end of side bar-->

	<div id='content'>
		<div id="home">

<div class="post">
  <ul class="content">
		
			<div class="post" id="postid-/2009/10/31/one-week-review">
				<h3 class="title"><a href="/2009/10/31/one-week-review.html">One Week Review</a></h3>
				
				<p><ul></p>

<pre><code>&lt;li&gt;&lt;strong&gt;YUI Conference&lt;/strong&gt; has been closed recently. There are a lot of valuable &lt;a href="http://yuilibrary.com/yuiconf2009/"&gt;presentation&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://www.douban.com/subject/3673223/"&gt;Coders at Work&lt;/a&gt;&lt;/strong&gt; - &lt;br /&gt;&lt;em&gt;&lt;strong&gt;What you’ll learn&lt;/strong&gt;&lt;/em&gt;&lt;br /&gt;
</code></pre>

<p>How the best programmers in the world do their job<br />
<em><strong>Who is this book for?</strong></em><br />
Programmers interested in the point of view of leaders in the field. Programmers looking for approaches that work for some of these outstanding programmers.</li></p>

<pre><code>&lt;li&gt;&lt;a href="http://couchdb.apache.org/"&gt;CouchDB&lt;/a&gt; - The first database that I have known that can be operated by Javascript. Key-value stored, http, json to connect and read... &lt;br /&gt;&lt;a href="http://www.freetofeel.com/2009/10/one-week-review/sketch/" rel="attachment wp-att-269"&gt;&lt;img src="http://www.freetofeel.com/wp-content/uploads/2009/10/sketch.png" alt="sketch" title="sketch" width="292" height="340" class="aligncenter size-full wp-image-269" /&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bret.appspot.com/entry/how-friendfeed-uses-mysql"&gt;How FriendFeed uses MySQL to store schema-less data&lt;/a&gt;&lt;ul&gt;
</code></pre>

<p></li>
</ul></p>


				<div class="post-metadata">
					October 31, 2009 | 
					<a href='/2009/10/31/one-week-review.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#life'>life</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/10/31/check-your-current-php-ini-path">
				<h3 class="title"><a href="/2009/10/31/check-your-current-php-ini-path.html">check your current php.ini path</a></h3>
				
				<p>You might have two different PHP versions installed: one for the command line, and another for the web. So use this function which was provided by symfony that can be easily judge.</p>

<pre name='code' class='php'>
/**
 * Gets the php.ini path used by the current PHP interpretor.
 *
 * @return string the php.ini path
 */
function get_ini_path()
{
  if ($path = get_cfg_var('cfg_file_path'))
  {
    return $path;
  }

  return 'WARNING: not using a php.ini file';
}
</pre>



				<div class="post-metadata">
					October 31, 2009 | 
					<a href='/2009/10/31/check-your-current-php-ini-path.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#php'>php</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/10/26/twitter-weekly-updates-for-2009-10-26">
				<h3 class="title"><a href="/2009/10/26/twitter-weekly-updates-for-2009-10-26.html">Twitter Weekly Updates for 2009-10-26</a></h3>
				
				<ul class="aktt_tweet_digest">
    <li>Google will announce &quot;Google Audio&quot; next Wednesday to Mash Up 4 Cool Web 2.0 Music Services: <a href="http://bit.ly/2qTE7c" rel="nofollow">http://bit.ly/2qTE7c</a> // ‘谷歌音乐‘ in china? <a href="http://twitter.com/Joshua_C/statuses/5160868495">#</a></li>
    <li>There will be no PDO_MySQL in PHP5.3 <a href="http://twitter.com/Joshua_C/statuses/5138923041">#</a></li>
    <li>There will be no PDO_MySQL <a href="http://twitter.com/Joshua_C/statuses/5138361963">#</a></li>
    <li>@<a href="http://twitter.com/sklivvz">sklivvz</a> <a href="mailto:joshokn@gmail.com">joshokn@gmail.com</a> Thanks! <a href="http://twitter.com/Joshua_C/statuses/5119114371">#</a></li>
    <li>RT @<a href="http://twitter.com/sklivvz">sklivvz</a> <a href="mailto:joshokn@gmail.com">joshokn@gmail.com</a> Thanks! <a href="http://twitter.com/Joshua_C/statuses/5119103417">#</a></li>
    <li>RT @<a href="http://twitter.com/sklivvz">sklivvz</a> is it possible for you to send me a google wave invitation? Thanks in advance. <a href="http://twitter.com/Joshua_C/statuses/5118745631">#</a></li>
    <li>RT @mengite: 又将迎来一波放送 Google Wave 的高潮, 我得到了 20 个邀请的权限.//可以赠送一枚吗？十分感谢。 <a href="http://twitter.com/Joshua_C/statuses/5118443615">#</a></li>
    <li>arguments is not an array. And turn objects into an array - var args = Array.prototype.slice.call(arguments); <a href="http://twitter.com/Joshua_C/statuses/5113968257">#</a></li>
    <li>Turn Your Office into Whiteboard  <a href="http://bit.ly/hQiPm" rel="nofollow">http://bit.ly/hQiPm</a> <a href="http://twitter.com/Joshua_C/statuses/5085198549">#</a></li>
    <li>RT @<a href="http://twitter.com/wangpei">wangpei</a> RT @<a href="http://twitter.com/anmin_wang">anmin_wang</a> 如果是通过hunter找的工作，面试完hunter故作关心打电话给你，询问表现，顺便问“他/她问了什么问题？”“他/她有没有问xxx&quot;，不要告诉他。他是把这些信息传递给其它candidate以增加成功机会。很流氓~~ <a href="http://twitter.com/Joshua_C/statuses/5084740441">#</a></li>
    <li>Can somebody give an answer to the question in this article(http://bit.ly/C8bGD) about the code smell? <a href="http://twitter.com/Joshua_C/statuses/5069970853">#</a></li>
    <li>RT @<a href="http://twitter.com/wangpei">wangpei</a> 男人为什么应当结婚？那是因为，当他遭遇绑架，他的妻子会为他奔走呼告，如果不结婚，奔走呼告者将是他年迈的母亲。 <a href="http://twitter.com/Joshua_C/statuses/5064726515">#</a></li>
</ul>


<p class="aktt_credit">Powered by <a href="http://alexking.org/projects/wordpress">Twitter Tools</a>.</p>



				<div class="post-metadata">
					October 26, 2009 | 
					<a href='/2009/10/26/twitter-weekly-updates-for-2009-10-26.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#twitter'>twitter</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/10/26/the-interesting-thing-about-google-translate">
				<h3 class="title"><a href="/2009/10/26/the-interesting-thing-about-google-translate.html">The interesting thing about Google Translate</a></h3>
				
				<p>Have you noticed that when you open the <a href="http://translate.google.com">Google Translate page</a>, and you enter some simple words or a sentence you want to translate.
The translated URL in your address bar looks like
'http://translate.google.com/translate_t#el|en|%CE%9C%CE%BF%CF%85%20%CE%B1%CF%81%CE%AD%CF%83%CE%B5%CE%B9%20%CE%B1%CF%85%CF%84%CE%AE%20%CE%B7%20%CE%BC%CE%BF%CF%85%CF%83%CE%B9%CE%BA%CE%AE'
Here we take the example,
Translate sentence 'Μου αρέσει αυτή η μουσική' -> 'I like this music'
Greek -> English
As we seen, the sentence was encoded and appended as a parameter in the URL.
But if you try to translate some longer sentence, like,
'Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.Μου αρέσει αυτή η μουσική.'</p>

<p>Now your address bar will look like 'http://translate.google.com/translate_t#'.
No matter which case, the translation words will be stored in cache. The next time, the translation words will be searched in cache firstly.
But why the translation words was added into Get parameter in first case? The only convenient that I can think is that we can copy and past the link from one browser to another. This convenient can not be achieved in the second case for the Get Parameter Length Limit. Is there any other secrets you know?</p>


				<div class="post-metadata">
					October 26, 2009 | 
					<a href='/2009/10/26/the-interesting-thing-about-google-translate.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#google'>google</a>
						, 
					
						
						<a href='/tags.html#translate'>translate</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/10/25/query-performance-optimization">
				<h3 class="title"><a href="/2009/10/25/query-performance-optimization.html">Query Performance Optimization</a></h3>
				
				<ol>
<li><p>Simple Treatment Method for a bad query is accessing less data and fecting less columns.</p></li>
<li><p>In MySQL, the simplest query cost metrics are:</p></li>
<li>Execution time</li>
<li>Number of rows examined</li>
<li><p>Number of rows returned</p></li>
<li><p>The access types range from a full table scan to index scans, range scans, unique index lookups, and constants. Each of these is faster than the one before it. If you aren’t getting a good access type, the best way to solve the problem is usually by adding an appropriate index.</p></li>
<li><p>Duplicated test record with a cool SQL:
Assuming there was serval record in your table 'animals[id,animal_type , animal_name]'</p>

<blockquote><blockquote><p>insert into animals(animal_type , animal_name ) select animal_type , animal_name from animals.</p></blockquote></blockquote></li>
<li><p>'The traditional approach to database design emphasizes doing as much work as possible with as few queries as possible.' - This advice doesn’t apply as much to MySQL. MySQL can run more than 50,000 simple queries per second on commodity server hardware and over 2,000 queries per second from a single correspondent on a Gigabit network.</p></li>
<li><p>Summary: When Application Joins May Be More Efficient >>
Not doing joins in the application may be more efficient when:
You cache and reuse a lot of data from earlier queries
You use multiple MyISAM tables
You distribute data across multiple servers
You replace joins with IN( ) lists on large tables
A join refers to the same table multiple times</p></li>
<li><p>Follow along with the illustration to see what happens when you send MySQL a query:
1). The client sends the SQL statement to the server.
2). The server checks the query cache. If there’s a hit, it returns the stored result from the cache; otherwise, it passes the SQL statement to the next step.
3). The server parses, preprocesses, and optimizes the SQL into a query execution plan.
4). The query execution engine executes the plan by making calls to the storage engine API.
5). The server sends the result to the client.</p></li>
<li><p>Fetching result directly without buffering:
[code]</p>

<h1>!/usr/bin/perl</h1>

use DBI;
my $dbh = DBI->connect('DBI:mysql:;host=localhost', 'user', 'p4ssword');
my $sth = $dbh->prepare('SELECT * FROM HUGE_TABLE', { mysql_use_result => 1 });
$sth->execute( );
while ( my $row = $sth->fetchrow_array( ) ) {

<h1>Do something with result</h1>

<p>}
[/code]
Notice that the call to prepare( ) specified to “use” the result instead of “buffering” it. You can also specify this when connecting, which will make every statement unbuffered:
[code]
my $dbh = DBI->connect('DBI:mysql:;mysql_use_result=1', 'user', 'p4ssword');
[/code]
This will be usfully when your fetching data is too big.</p></li>
<li><p>Query states:
Sleep -
  The thread is waiting for a new query from the client.
Query -
  The thread is either executing the query or sending the result back to the client.
Locked -
  The thread is waiting for a table lock to be granted at the server level.
Analyzing and statistics -
  The thread is checking storage engine statistics and optimizing the query.
Copying to tmp table [on disk] -
  The thread is processing the query and copying results to a temporary table, probably for a GROUP BY, for a filesort, or to satisfy a UNION. If the state ends with “on disk,” MySQL is converting an in-memory table to an on-disk table.
Sorting result -
  The thread is sorting a result set.
Sending data -
  This can mean several things: the thread might be sending data between stages of the query, generating the result set, or returning the result set to the client.</p></li>
<li><p>MySQL uses the term “join” more broadly than you might be used to. In sum, it considers every query a join—not just every query that matches rows from two tables, but every query.</p></li>
</ol>



				<div class="post-metadata">
					October 25, 2009 | 
					<a href='/2009/10/25/query-performance-optimization.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#mysql'>mysql</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/10/24/the-behavior-of-javascript-is-not-always-your-expected">
				<h3 class="title"><a href="/2009/10/24/the-behavior-of-javascript-is-not-always-your-expected.html">The behavior of javascript is not always your expected</a></h3>
				
				<p>Let's raise the issue '07 + 08 = 07' firstly from <a href="http://www.debuggable.com/posts/7+8===7-in-javascript:4acba016-d204-489b-b5a0-1fd0cbdd56cb">this guy's article</a>.</p>

<pre name='code' class='javascript'>
var a = '07';
var b = '08'

alert(a + b); //'0708';
</pre>


<p>OK. We knew the result. What we will do is using the 'parseInt' method.</p>

<pre name='code' class='javascript'>
var a = '07';
var b = '08'

alert(parseInt(a) + parseInt(b)); //'07';
</pre>


<p>The result is not our expected this time.</p>

<p>So boys give a lot of solutions.
solution 1:</p>

<pre name='code' class='javascript'>
var a = '07';
var b = '08'

alert(parseInt(a, 10) + parseInt(b, 10)); //'15';
</pre>


<p>solution 2:</p>

<pre name='code' class='javascript'>
var a = '07';
var b = '08'

alert(Number(a) + Number(b)); //'15';
</pre>


<p>I like this solution. If the variable is a number, transform it to 'Number' directly to keep it safe. If the variable is a string, transform it to 'String' directly.
The same issue occurred in Date function too.</p>

<pre name='code' class='javascript'>
var d = new Date(2009, 08, 02); //It's 2nd of JULY
</pre>


<p>The <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date">reason</a>.</p>

<blockquote>year
    Integer value representing the year. For compatibility (in order to avoid the Y2K problem), you should always specify the year in full; use 1998, rather than 98.

month
    Integer value representing the month, beginning with 0 for January to 11 for December.

date
    Integer value representing the day of the month (1-31). </blockquote>





				<div class="post-metadata">
					October 24, 2009 | 
					<a href='/2009/10/24/the-behavior-of-javascript-is-not-always-your-expected.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#javascript'>javascript</a>
						
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/10/22/code-smell">
				<h3 class="title"><a href="/2009/10/22/code-smell.html">Code Smell</a></h3>
				
				<p>There is a <a href="http://www.cnblogs.com/idior/archive/2006/06/13/424592.html">code smell list</a> that we can then as a reference.</p>

<blockquote>
In computer programming, code smell is any symptom in the source code of a computer program that indicates something may be wrong. It generally indicates that the code should be refactored or the overall design should be reexamined. The term appears to have been coined by Kent Beck on WardsWiki. Usage of the term increased after it was featured in Refactoring. Improving the Design of Existing Code.</blockquote>


<p>Interesting Discussion about '<a href="http://stackoverflow.com/questions/114342/what-are-code-smells-what-is-the-best-way-to-correct-them">What are Code Smells? What is the best way to correct them?</a>'.</p>

<p>A question is flying on my head:</p>

<pre name='code' class='php'>
class Person{
 var $name;
 var $age;
//....
}

function calculateEmployeeAverageAge($employee){
//...
}

calculateEmployeeAverageAge(new Person());
</pre>


<p>If there is a function like 'calculateEmployeeAverageAge', is it a code smell? I have met this before in our own product code. I mean the function must know much about the Person structure. But actually, we didn't want to a function rely on too much outside. I always avoid this way in my application. But the guy said 'Methods with a ridiculous (e.g. 7+) amount of parameters. This usually means that there should be a new class introduced (which, when passed, is called an indirect parameter.)' in this <a href="http://stackoverflow.com/questions/114342/what-are-code-smells-what-is-the-best-way-to-correct-them">discussion</a>.</p>


				<div class="post-metadata">
					October 22, 2009 | 
					<a href='/2009/10/22/code-smell.html#disqus_thread'>View Comments</a>
					
						
							| 
						
						<a href='/tags.html#refactor'>refactor</a>
						
					 
				</div>

			</div>
		
		
		<div class="paging">
		
			<a href="/page12" class="previous">&#x25C4; Previous</a>
		
		
			
			  <a href="/page10" class="next">Next &#x25BA;</a>
			
		
		</div>

  </ul>
</div>
</div>

	</div>
  
  <div class="footer">
		<div id="copyright">
			Copyright &copy; 2011 Joshua Chi - Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://github.com/">Github</a>
		</div>
  </div>    
</div>

</body>
</html>
