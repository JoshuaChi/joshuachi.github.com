<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Joshua Chi's Blog</title>
   <meta name="author" content="Joshua Chi" />
   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

		<!-- Google Analytics -->
		<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-9434024-4']);
		_gaq.push(['_trackPageview']);

		(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>
		<!-- Google Analytics end -->
</head>
<body>

<div class="site">
  <div class="header">
    <a href="/">Free To Feel</a>
  </div>

<!--start of side bar-->
<div id="sidebar" >
	<img src='http://www.gravatar.com/avatar/81759b36bd906bbf803ce4a5ce84e643.png' />
	<br />
	Joshua Chi
    <div class="contact">
        <a href="http://twitter.com/Joshua_C/">twitter.com/Joshua_C</a><br />
				<a href="https://github.com/joshuachi">My Github</a><br />
			</div>
			<div>
				<a href='http://www.freetofeel.com/archives.html'> Archived Posts</a>
			</div>
			<div class="rss">
				<p>
				<a href="http://freetofeel.com/atom.xml">Subscribe(xml)</a>
				</p>
				<p>
				<a href="http://feeds.feedburner.com/FreeToFeel">Subscribe(feedburner)</a>
				</p>
			</div>	
		
			<p class='douban'>
				<script type="text/javascript" src="http://www.douban.com/service/badge/joshua_c/?show=collection&amp;select=random&amp;n=8&amp;columns=2&amp;hidelogo=yes&amp;cat=book|music" ></script> 
				</p>
</div>
<!--end of side bar-->

	<div id='content'>
		<div id="home">

<div class="post">
  <ul class="content">
		
			<div class="post" id="postid-/2009/06/30/after-auto-redirect-from-paypal-the-session-was-lostcake-app">
				<h3 class="title"><a href="/2009/06/30/after-auto-redirect-from-paypal-the-session-was-lostcake-app.html">After auto redirect from PayPal, the session was lost[Cake App]</a></h3>
				
				<p>Reproduce steps:</p>

<ol>
<li>Customer login <a href="https://www.mysite.com">my site</a>;</li>
<li>Choose a product and redirect to <a href="https://developer.paypal.com/cgi-bin/devscr">Paypal sandbox site</a> to complete the payment;</li>
<li>After the payment, the customer will be auto redirected to my site;</li>
<li>And then the customer session was lost.</li>
</ol>


<p>I found the fail reason.</p>

<pre name="code" class="php">
function __initSession() {
    $iniSet = function_exists('ini_set');

    if ($iniSet && env('HTTPS')) {
        ini_set('session.cookie_secure', 1); 
    } 
    switch ($this->security) {
     case 'high': $this->cookieLifeTime = 0;
     if ($iniSet) {
     ini_set('session.referer_check', $this->host);
     } 
     break;
     case 'medium': $this->cookieLifeTime = 7 * 86400;
     if ($iniSet) {
     ini_set('session.referer_check', $this->host);
     } 
     break;
     case 'low': default: $this->cookieLifeTime = 788940000; break;
    }
}
</pre>


<p>If you set the security level 'high' or 'medium' , the session wil be renewed.</p>

<p>A piece of comment from a guy in php.net:</p>

<pre name="code" class="html">
If you have a value specified for session.referer_check you may run into difficulty when someone accesses your site and attempts to log in with a mis-capitalized URL.  
The logon will fail because any calls to session_start() will result in the existing session being trashed and a new one being created.  This becomes a bigger problem when the logon is followed by a header("Location: ...") redirect, because the session_start() at the top of the page will fail.</pre>


<p>So now , I have to avoid to use the refer_check.</p>


				<div class="post-metadata">
					June 30, 2009 | 
					<a href='/2009/06/30/after-auto-redirect-from-paypal-the-session-was-lostcake-app.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/06/29/vbox-this-kernel-requires-the-following-features-not-present-on-the-cpupae">
				<h3 class="title"><a href="/2009/06/29/vbox-this-kernel-requires-the-following-features-not-present-on-the-cpupae.html">VBOX: this kernel requires the following features not present on the CPU:pae</a></h3>
				
				<p>Solution:
In the main window of VirtualBox->settings->General selection on the left->the Advanced tab on the right.
Enable PAE/NX is in the middle of the window in Extended Features.</p>


				<div class="post-metadata">
					June 29, 2009 | 
					<a href='/2009/06/29/vbox-this-kernel-requires-the-following-features-not-present-on-the-cpupae.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/06/29/twitter-weekly-updates-for-2009-06-29">
				<h3 class="title"><a href="/2009/06/29/twitter-weekly-updates-for-2009-06-29.html">Twitter Weekly Updates for 2009-06-29</a></h3>
				
				<ul class="aktt_tweet_digest">
    <li>看到baidu blog上面一大堆的我顶我顶,让我想到可以诱导中国一大堆没有脱离幼稚的网民群体来给网站带点PV <a href="http://twitter.com/Joshua_C/statuses/2370909243">#</a></li>
    <li><a href="http://bit.ly/bZs7T" rel="nofollow">http://bit.ly/bZs7T</a>
 -- 早就有意识,这个只要大牌进来,所有的就只能喝汤 <a href="http://twitter.com/Joshua_C/statuses/2366023451">#</a></li>
    <li><a href="http://bit.ly/ykdz6" rel="nofollow">http://bit.ly/ykdz6</a>
 //旁边的还不自觉爆掉?留着干嘛 <a href="http://twitter.com/Joshua_C/statuses/2355885796">#</a></li>
    <li>每行数据都有自己的版本控制 <a href="http://twitter.com/Joshua_C/statuses/2340868290">#</a></li>
    <li>都是在强调写unit test的重要性，是不是应该有篇文档强调什么条件下是没有必要对一个方法一个模块写unit test的。低效的，收获甚微的。 <a href="http://twitter.com/Joshua_C/statuses/2336566494">#</a></li>
    <li>既然是鸡肋,既不能当钢筋混凝土使 <a href="http://twitter.com/Joshua_C/statuses/2327036145">#</a></li>
    <li>我决定把以前所有在网络上看得资料都download下来,准备过冬 <a href="http://twitter.com/Joshua_C/statuses/2325049439">#</a></li>
    <li>unit test - 鸡肋 <a href="http://twitter.com/Joshua_C/statuses/2323740503">#</a></li>
    <li>consensus driven development // ? <a href="http://twitter.com/Joshua_C/statuses/2323517357">#</a></li>
    <li>Timelines bad, stability good -- cool <a href="http://twitter.com/Joshua_C/statuses/2323487490">#</a></li>
    <li>replace of yslow <a href="http://bit.ly/rPV07" rel="nofollow">http://bit.ly/rPV07</a> <a href="http://twitter.com/Joshua_C/statuses/2320278819">#</a></li>
    <li>为啥还是时段时序呢,... <a href="http://twitter.com/Joshua_C/statuses/2311900925">#</a></li>
    <li>test <a href="http://twitter.com/Joshua_C/statuses/2291346432">#</a></li>
    <li>RT: @mason_hzx: @<a href="http://twitter.com/Joshua_C">Joshua_C</a> 你是在说google? 不是，只是看到别人的帖子 <a href="http://twitter.com/Joshua_C/statuses/2287766859">#</a></li>
</ul>


<p class="aktt_credit">Powered by <a href="http://alexking.org/projects/wordpress">Twitter Tools</a>.</p>



				<div class="post-metadata">
					June 29, 2009 | 
					<a href='/2009/06/29/twitter-weekly-updates-for-2009-06-29.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/06/29/the-failed-requests-in-apachebench-test">
				<h3 class="title"><a href="/2009/06/29/the-failed-requests-in-apachebench-test.html">The Failed requests in ApacheBench Test</a></h3>
				
				<p>Problem: I run <a href="http://httpd.apache.org/docs/2.0/programs/ab.html">ab </a>test<ab -c 10 -t 60 http://www.xxx.com> for my website yesterday, and there are so many failed request.
And I found the following explanation from <a href="http://fixunix.com/linux/269587-apache-benchmark.html">fixunix</a>:</p>

<pre  name="code" class="html">
May not actually be a problem. Reason? It might be a site that serves dynamic context (such as different cookie IDs mentioned) where the file size changes between each query. 

Easy way to verify: 

Code:    $ wget <url>   

Repeat that twice, then: 

Code:    $ diff <retrieved filename> <retrieved filename>.1 

See if there are differences. If yes, then you can ignore the length-related failures. If no, it's some other cause and need to investigate further.
</pre>


<p>I hope it will help you too if you have the same problem.</p>


				<div class="post-metadata">
					June 29, 2009 | 
					<a href='/2009/06/29/the-failed-requests-in-apachebench-test.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/06/22/twitter-weekly-updates-for-2009-06-22">
				<h3 class="title"><a href="/2009/06/22/twitter-weekly-updates-for-2009-06-22.html">Twitter Weekly Updates for 2009-06-22</a></h3>
				
				<ul class="aktt_tweet_digest">
    <li>Dinosaur is big enough , bug die out from the world; zzzzz~~~ <a href="http://twitter.com/Joshua_C/statuses/2277400408">#</a></li>
    <li><a href="http://userfly.com/" rel="nofollow">http://userfly.com/</a> -- So cool! web master tool <a href="http://twitter.com/Joshua_C/statuses/2272200851">#</a></li>
    <li>RT @<a href="http://twitter.com/mranti">mranti</a> After tens of thousands cops robbed people in #<a href="http://search.twitter.com/search?q=%23Shishou">Shishou</a> of a corpse, welcome to China ruled by Zombies. <a href="http://bit.ly/M1EJx" rel="nofollow">http://bit.ly/M1EJx</a> <a href="http://twitter.com/Joshua_C/statuses/2262796894">#</a></li>
    <li>I will try to find another way to enhance the performance of element in Cake <a href="http://twitter.com/Joshua_C/statuses/2260701169">#</a></li>
    <li>A little disappoint with Smart integrated with Cake. We couldn&#39;t use syntax like echo in element. <a href="http://twitter.com/Joshua_C/statuses/2260699723">#</a></li>
    <li>It seems twitterfox stop to work now. ... <a href="http://twitter.com/Joshua_C/statuses/2260672322">#</a></li>
    <li>Read-optimize your source code <a href="http://www.brendel.com/consulting/blog/2009/06/read-optimized-source-code.html" rel="nofollow">http://www.brendel.com/consulting/blog/2009/06/read-optimized-source-code.html</a> <a href="http://twitter.com/Joshua_C/statuses/2214899340">#</a></li>
    <li>test <a href="http://twitter.com/Joshua_C/statuses/2202798952">#</a></li>
    <li>Service overloaded? <a href="http://twitter.com/Joshua_C/statuses/2200766877">#</a></li>
    <li>Why only &#39;The Lounge&#39; can work on opera unite? The others all displayed as &#39;404&#39; <a href="http://twitter.com/Joshua_C/statuses/2200683602">#</a></li>
    <li>wordpress twitter plugin test <a href="http://twitter.com/Joshua_C/statuses/2189969248">#</a></li>
    <li>twitter plugin test <a href="http://twitter.com/Joshua_C/statuses/2189958825">#</a></li>
</ul>


<p class="aktt_credit">Powered by <a href="http://alexking.org/projects/wordpress">Twitter Tools</a>.</p>



				<div class="post-metadata">
					June 22, 2009 | 
					<a href='/2009/06/22/twitter-weekly-updates-for-2009-06-22.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/06/22/pure-css-to-make-the-footer-at-the-bottom-of-the-page">
				<h3 class="title"><a href="/2009/06/22/pure-css-to-make-the-footer-at-the-bottom-of-the-page.html">Pure CSS to make the footer at the bottom of the page</a></h3>
				
				<p>Pure CSS, no javascript to make the footer at the bottom of the page.
Imaging you have the html layout like the following:</p>

<pre name="code" class="php">&lt;body&gt;

&lt;div id="container"&gt;
&lt;div id="header"&gt;&lt;/div&gt;
&lt;div id="body"&gt;&lt;/div&gt;
&lt;div id="footer"&gt;&lt;/div&gt;

&lt;/body&gt;</pre>


<p>What you will do is simple.</p>

<pre  name="code" class="css">html,
body {
margin:0;
padding:0;
height:100%;
}
#container {
min-height:100%;
position:relative;
}
#footer {
position:absolute;
bottom:0;
width:100%;
height:60px;/* Height of the footer */
background:#6cf;
}
</pre>


<p>Thanks to <a href="http://matthewjamestaylor.com/">Matthew James Taylor</a> who gives the idea how to implement this.</p>


				<div class="post-metadata">
					June 22, 2009 | 
					<a href='/2009/06/22/pure-css-to-make-the-footer-at-the-bottom-of-the-page.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
			<div class="post" id="postid-/2009/06/11/run-cakephp-cronjob-on-web-hosting">
				<h3 class="title"><a href="/2009/06/11/run-cakephp-cronjob-on-web-hosting.html">Run CakePHP CronJob On Web Hosting</a></h3>
				
				<blockquote><span class="Apple-style-span" style="border-collapse: separate; color: #000000; font-family: 'Times New Roman'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span class="Apple-style-span" style="font-family: Verdana; font-size: 11px; white-space: pre;">/usr/local/bin/php /home/Username/www/cake/console/cake.php -app /home/</span></span><span class="Apple-style-span" style="border-collapse: separate; color: #000000; font-family: 'Times New Roman'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span class="Apple-style-span" style="font-family: Verdana; font-size: 11px; white-space: pre;">Username</span></span><span class="Apple-style-span" style="border-collapse: separate; color: #000000; font-family: 'Times New Roman'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span class="Apple-style-span" style="font-family: Verdana; font-size: 11px; white-space: pre;">/www/app cronjob</span></span></blockquote>


<p>::Replace Username with your account name in Web Sharing Hosting.</p>


				<div class="post-metadata">
					June 11, 2009 | 
					<a href='/2009/06/11/run-cakephp-cronjob-on-web-hosting.html#disqus_thread'>View Comments</a>
					 
				</div>

			</div>
		
		
		<div class="paging">
		
			<a href="/page17" class="previous">&#x25C4; Previous</a>
		
		
			
			  <a href="/page15" class="next">Next &#x25BA;</a>
			
		
		</div>

  </ul>
</div>
</div>

	</div>
  
  <div class="footer">
		<div id="copyright">
			Copyright &copy; 2011 Joshua Chi - Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://github.com/">Github</a>
		</div>
  </div>    
</div>

</body>
</html>
